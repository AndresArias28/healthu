<div class="col">
  <div class="card border-0 shadow-lg rounded-4 dashboard-card">
    <div class="card-body p-4 p-md-5">
      <!-- Header -->
      <div
        class="d-flex flex-wrap justify-content-between align-items-center mb-4 border-bottom pb-3"
      >
        <div>
          <h3 class="fw-bold text-success mb-1">
            <i class="bi bi-suit-heart me-2"></i>Gestión de Ejercicios
          </h3>
          <p class="text-muted small mb-0">
            Administra tus ejercicios disponibles para las rutinas de tus aprendices.
          </p>
        </div>

        <div class="d-flex flex-wrap gap-2 mt-3 mt-md-0">
          <button
            class="btn btn-outline-success btn-lg d-flex align-items-center gap-2"
            (click)="crearEjercicio()"
          >
            <i class="bi bi-plus-circle"></i> Crear Ejercicio
          </button>
        </div>
      </div>

      <!-- Buscador -->
      <div class="input-group input-group-lg mb-4 search-bar">
        <span class="input-group-text bg-success text-white border-0 rounded-start-3">
          <i class="bi bi-search"></i>
        </span>
        <input
          type="text"
          placeholder="Buscar ejercicio por nombre..."
          [(ngModel)]="terminoBusqueda"
          (ngModelChange)="buscar()"
          class="form-control border-0 shadow-sm"
        />
      </div>

      <!-- Tabla -->
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr class="text-uppercase small text-muted">
              <th class="border-0 ps-4">Ejercicio</th>
              <th class="border-0">Descripción</th>
              <th class="border-0">Músculos</th>
              <th class="border-0">MET</th>
              <th class="border-0 text-end pe-4">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let ejercicio of ejerciciosPaginados">
              <td class="ps-4">
                <div class="d-flex align-items-center gap-3">
                  <img
                    [src]="
                      ejercicio.fotoEjercicio ||
                      'https://cdn-icons-png.flaticon.com/512/4663/4663470.png'
                    "
                    class="rounded shadow-sm border"
                    alt="imagen ejercicio"
                    style="width: 80px; height: 80px; object-fit: cover;"
                  />
                  <div>
                    <p class="fw-semibold mb-0 text-dark">
                      {{ ejercicio.nombreEjercicio }}
                    </p>
                    <span class="text-muted small"
                      ><i class="bi bi-person-workspace me-1"></i
                      >{{ ejercicio.musculos }}</span
                    >
                  </div>
                </div>
              </td>
              <td>
                <p class="mb-0 text-muted small">
                  {{ ejercicio.descripcionEjercicio }}
                </p>
              </td>
              <td>
                <span class="badge bg-secondary bg-opacity-75">
                  {{ ejercicio.musculos }}
                </span>
              </td>
              <td>
                <span class="badge bg-success text-white">{{ ejercicio.met }}</span>
              </td>
              <td class="text-end pe-4">
                <button
                  class="btn btn-outline-primary btn-sm rounded-circle me-2"
                  (click)="abrirModal(ejercicio)"
                  title="Editar"
                >
                  <i class="bi bi-pencil"></i>
                </button>
                <button
                  class="btn btn-outline-danger btn-sm rounded-circle"
                  (click)="eliminarEjercicio(ejercicio.idEjercicio!)"
                  title="Eliminar"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Paginación -->
      <div
        class="d-flex flex-wrap justify-content-between align-items-center mt-4 px-2 border-top pt-3"
      >
        <p class="mb-0 small text-muted">
          Mostrando
          {{ (paginaActual - 1) * elementosPorPagina + 1 }}
          -
          {{
            Math.min(paginaActual * elementosPorPagina, ejercicios.length)
          }}
          de {{ ejercicios.length }} ejercicios
        </p>

        <div class="btn-group">
          <button
            class="btn btn-outline-success btn-sm"
            [disabled]="paginaActual === 1"
            (click)="cambiarPagina(paginaActual - 1)"
          >
            <i class="bi bi-chevron-left"></i> Anterior
          </button>

          <button
            class="btn btn-outline-success btn-sm"
            [disabled]="paginaActual === totalPaginas"
            (click)="cambiarPagina(paginaActual + 1)"
          >
            Siguiente <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
